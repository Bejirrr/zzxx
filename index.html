<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shadow Scripting Roblox Obfuscator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
      padding: 20px;
    }
    h2 {
      color: #00ffcc;
    }
    textarea {
      width: 100%;
      background: #1e1e1e;
      color: #00ffcc;
      border: none;
      padding: 10px;
      margin-bottom: 10px;
      font-family: monospace;
      border-radius: 5px;
    }
    button {
      background: #00ffcc;
      color: #000;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }
    button:hover {
      background: #00e0b0;
    }
  </style>
</head>
<body>
  <h2>ðŸ”’ Shadow Scripting Roblox Obfuscator</h2>
  <textarea id="input" rows="10" placeholder="Paste your Lua code here..."></textarea><br>
  <button onclick="runObfuscator()">Obfuscate</button>
  <button onclick="downloadCode()">Download</button>
  <textarea id="output" rows="15" placeholder="Obfuscated code will appear here..."></textarea>

  <script>
    function generateRandomName(length = 8) {
      const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
      return Array.from({ length }, () => chars[Math.floor(Math.random() * chars.length)]).join('');
    }

    function encryptString(str) {
      const encoded = btoa(str);
      return `"decodeBase64('${encoded}')"`; 
    }

    function obfuscateLuaCode(code) {
      code = code.replace(/--\\[\\[[\\s\\S]*?\\]\\]/gm, "");
      code = code.replace(/--.*$/gm, "");
      code = code.replace(/\\s+/g, " ");

      const identifiers = new Set();
      code = code.replace(/\\b(local\\s+)?([a-zA-Z_][a-zA-Z0-9_]*)\\b/g, (match, local, name) => {
        const reserved = [
          "local", "function", "end", "then", "if", "elseif", "else", "for", "while", "do",
          "repeat", "until", "return", "true", "false", "nil", "and", "or", "not", "break"
        ];
        if (reserved.includes(name)) return match;
        if (!identifiers.has(name)) identifiers.add(name);
        return (local || "") + `_${generateRandomName(10)}`;
      });

      code = code.replace(/(["'])(?:(?=(\\\\?))\\2.)*?\\1/g, match =>
        encryptString(match.slice(1, -1))
      );

      const luaDecoder = \`
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
function decodeBase64(data)
  data = string.gsub(data, '[^'..b..'=]', '')
  return (data:gsub('.', function(x)
    if (x == '=') then return '' end
    local r,f='',(b:find(x)-1)
    for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
    return r
  end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
    if (#x ~= 8) then return '' end
    local c=0
    for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
    return string.char(c)
  end))
end
\`;

      return luaDecoder + "\\n\\n" + code;
    }

    function runObfuscator() {
      const input = document.getElementById("input").value;
      const result = obfuscateLuaCode(input);
      document.getElementById("output").value = result;
    }

    function downloadCode() {
      const code = document.getElementById("output").value;
      const blob = new Blob([code], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "obfuscated.lua";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
